{% extends 'base.html.twig' %}

{% block title %}Phase{% endblock %}

{% block body %}
    <h1>Phase</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Intitule</th>
                <td>{{ phase.intitule }}</td>
            </tr>
            <tr>
                <th>Projet</th>
                <td>{{ phase.projet.intitule }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{{ phase.status }}</td>
            </tr>
            <tr>
                <th>DateDebut</th>
                <td>{{ phase.dateDebut }}</td>
            </tr>
            <tr>
                <th>DateFin</th>
                <td>{{ phase.dateFin }}</td>
            </tr>
            <tr>
            <th>Tasks</th>
            {% for phaseTask in phaseTasks %}
            <td>{{phaseTask}}</td>
            {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_phase_index') }}">back to list</a>
    {% if is_granted("ROLE_MANAGER") or is_granted("ROLE_OWNER") and phase.status == "Open" %}
        <a href="{{ path('app_phase_launch' , {'id': phase.id}) }}">
        <button type="button" class="btn btn-success btn-sm">Launch</button></a>
    {% endif %}

    {% if is_granted("ROLE_MANAGER") or is_granted("ROLE_OWNER") and phase.status == "In Progress" %}
        <a href="{{ path('app_phase_finish' , {'id': phase.id}) }}">
        <button type="button" class="btn btn-danger btn-sm">Cloturer</button></a>
    {% endif %}

    <a href="{{ path('app_phase_edit', {'id': phase.id}) }}">edit</a>

    {{ include('phase/_delete_form.html.twig') }}
{% endblock %}
